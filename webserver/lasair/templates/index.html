{% extends "layouts/base.html" %}
{% block title %} Home {% endblock %}
{% load static %}
{% block content %}

<!--{{ message }} -->
<div class="container">
   <div class="row mt-4">
      <div class="col-12  mb-4">
        <div class="alert alert-success" role="alert">
          {{ news }}
    </div>
      </div>
    </div>

    <div style="overflow:hidden;margin:0 auto;">
        <div id="aladin-lite-div" style='width: 1000;height: 800px;'>
    </div>
  </div>

</div>

<script type="text/javascript">
var colors = {{ colors|safe }};
var alerts = {{ alerts|safe }};

var nclass = 4;
var nage = 5;

document.addEventListener('DOMContentLoaded', function() {
  var imageSurvey = 'P/Mellinger/color'

  var aladin;
  A.init.then(() => {
    aladin = A.aladin('#aladin-lite-div', {
        fov:360, 
        cooFrame: 'ICRSd',
        projection: 'AIT',
        target: 'Arp 240', 
        showReticle: false,
        showCooGrid: false,
        showCooGridControl: true,
        showFullscreenControl: false,
        showProjectionControl: false,
        showLayersControl: false,
        showFrame: false,
        showGotoControl: false
    });
    aladin.setBaseImageLayer(aladin.newImageSurvey(imageSurvey ));
    for (iclass = 0; iclass < nclass; iclass++) {
      for (iage = 0; iage < nage; iage++) {
        var size = 28 - 5*iage;
        var color = colors[iclass][iage];
        var markers = A.catalog({name: 'markers'+iclass+iage, sourceSize: size, color:color});
        aladin.addCatalog(markers);
        console.log(iclass, iage, alerts[iclass][iage].length);
        L = new Array;
        for(k=0; k<alerts[iclass][iage].length; k++){
          a = alerts[iclass][iage][k];
          L.push(A.marker(a.coordinates[0], a.coordinates[1], 
            {popupTitle: '<a href="/objects/' + a.objectId + '/" target="_blank">' + a.objectId + '</a>',
            popupDesc: 'Class:' + a.class +', Age:' + a.age.toFixed(1) +' days'}));
        }
        markers.addSources(L);
      }
    }
  });
});

</script>

<div> <span id="class0">&block;&block;&block;</span>  Possible Supernova </div>
<div> <span id="class1">&block;&block;&block;</span>  Nuclear Transient </div>
<div> <span id="class2">&block;&block;&block;</span>  Cataclysmic Variable </div>
<div> <span id="class3">&block;&block;&block;</span>  Active Galaxy </div>
<script>
console.log('key');
for (iclass = 0; iclass < nclass; iclass++){
    console.log(colors[iclass][0]);
    document.getElementById("class"+iclass).style.color = colors[iclass][0];
}
</script>



Mellinger color optical survey - Copyright 2000-2017 Axel Mellinger. All rights reserved.

{% endblock %}

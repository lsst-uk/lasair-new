
{% load humanize %}


<div class="card border-0 shadow h-100">



    <div class="card-header d-sm-flex flex-row align-items-start flex-0 mb-0 pb-0 border-0">
        <div class="d-block mb-sm-0">
            {% if type == "my" and user.is_authenticated %}
                <img class="avatar rounded" style="width:3.8rem;height:3.8rem; "  alt="Image placeholder" src="{{ request.user.profile.image.url }}">

            {% else %}

                <div class="icon-shape icon-shape-primary rounded me-4 me-sm-0">
                    <svg class="w-6 h-6" style="height: 3rem;" fill="currentColor" stroke="currentColor" stroke-width="1"  viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">


                        <g>
                            <path d="m62 58c0 5.332-8 5.332-8 0s8-5.332 8 0"/>
                            <path d="m62 74c0 5.332-8 5.332-8 0s8-5.332 8 0"/>
                            <path d="m78 58c0 5.332-8 5.332-8 0s8-5.332 8 0"/>
                            <path d="m78 74c0 5.332-8 5.332-8 0s8-5.332 8 0"/>
                            <path d="m38 18h-12c-4.418 0-8 3.582-8 8v12c0 2.1211 0.84375 4.1562 2.3438 5.6562s3.5352 2.3438 5.6562 2.3438h12c2.1211 0 4.1562-0.84375 5.6562-2.3438s2.3438-3.5352 2.3438-5.6562v-12c0-2.1211-0.84375-4.1562-2.3438-5.6562s-3.5352-2.3438-5.6562-2.3438zm-12 20v-12h12v12z"/>
                            <path d="m18 74c0 2.1211 0.84375 4.1562 2.3438 5.6562s3.5352 2.3438 5.6562 2.3438h12c2.1211 0 4.1562-0.84375 5.6562-2.3438s2.3438-3.5352 2.3438-5.6562v-12c0-2.1211-0.84375-4.1562-2.3438-5.6562s-3.5352-2.3438-5.6562-2.3438h-12c-4.418 0-8 3.582-8 8zm8-12h12v12h-12z"/>
                            <path d="m74 18h-12c-4.418 0-8 3.582-8 8v12c0 2.1211 0.84375 4.1562 2.3438 5.6562s3.5352 2.3438 5.6562 2.3438h12c2.1211 0 4.1562-0.84375 5.6562-2.3438s2.3438-3.5352 2.3438-5.6562v-12c0-2.1211-0.84375-4.1562-2.3438-5.6562s-3.5352-2.3438-5.6562-2.3438zm-12 20v-12h12v12z"/>
                        </g>
                    </svg>

                </div>
            {% endif %}




        </div>
        <div class="d-flex ms-4">
            <div class="row d-block d-xl-flex align-items-start">
                <h3 class="fw-extrabold mb-2">{% if type == "my" %}
                    My Catalogue Watchlists
                {% else %}
                    Public Gallery
                {% endif %} </h3>

                <small class="text-gray-500">
                    {% if type == "my" %}
                        Your saved catalogue based watchlists.
                    {% else %}
                        Catalogue based watchlists submitted to the public gallery by other Lasair users. You can view matches or copy individual watchlists into your own collection.
                    {% endif %}
                </small>
            </div>
        </div>

    </div>



    <div class="card-body p-2 pt-4">
        <div class="table-responsive p-4 pt-0">
            <table  class="table table-flush datatable" id="{{type}}_datatable">
                <thead class="thead-light">
                    {% if type == "my" %}
                        <tr>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Count</th>
                        </tr></thead>
                        <tbody>
                            {% for wl in my_watchlists %}
                                <tr><td>

                                    {% if wl.public %}
                                        <div class="icon-shape me-0 me-sm-0 text-gray-400" data-bs-toggle="tooltip" data-bs-title="public list">

                                            <svg class="w-1 h-1 pt-1"  fill="currentColor" stroke="currentColor" stroke-width="1"  viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">

                                                <g>
                                                    <path d="m86.57 42.738h-48.898c-3.1914 0-5.7812 2.5898-5.7812 5.7812v39.691c0 3.1914 2.5898 5.7812 5.7812 5.7812h48.898c3.1914 0 5.7812-2.5898 5.7812-5.7812v-39.691c0-3.1914-2.5898-5.7812-5.7812-5.7812zm-21.25 24.602v10.551c0 1.7617-1.4297 3.1992-3.1992 3.1992-1.7695 0-3.1992-1.4297-3.1992-3.1992v-10.551c0-0.37109-0.17188-0.71875-0.46094-0.94922-1.4102-1.1211-2.2305-2.8008-2.2305-4.6016 0-3.2383 2.6406-5.8789 5.8789-5.8789s5.8789 2.6406 5.8789 5.8789c0 1.8008-0.80859 3.4805-2.2305 4.6016-0.28906 0.23047-0.46094 0.57812-0.46094 0.94922z"/>
                                                    <path d="m42.07 26.039v14.262h5.6719v-14.262c0-11.051-8.9883-20.039-20.039-20.039-11.055 0-20.055 8.9883-20.055 20.039v14.262h5.6719v-14.262c0-7.9297 6.4492-14.379 14.379-14.379 7.9297 0 14.379 6.4492 14.379 14.379z"/>
                                                </g>
                                            </svg>




                                        </div>

                                    {% else %}
                                        <div class="icon-shape me-0 me-sm-0 text-gray-400" data-bs-toggle="tooltip" data-bs-title="private list">

                                            <svg class="w-1 h-1 pt-1"  fill="currentColor" stroke="currentColor" stroke-width="1"  viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                                <path d="m29.906 41.695h0.75v-9.8633c0-6.9492 3-13.031 9.1484-16.488 3.0938-1.7383 6.6523-2.5938 10.195-2.5938 3.5391 0 7.1016 0.85547 10.195 2.5938 6.1523 3.457 9.1523 9.5352 9.1523 16.488v9.8633h0.75c3.7109 0 6.75 3.0391 6.75 6.75v32.059c0 3.7109-3.0352 6.75-6.75 6.75h-40.188c-3.7109 0-6.75-3.0391-6.75-6.75v-32.059c0-3.7109 3.0352-6.75 6.75-6.75zm22.48 24.098v5.7812c0 3.1602-4.7773 3.1602-4.7773 0v-5.7812c-1.7969-0.88281-3.0312-2.7305-3.0312-4.8672 0-2.9922 2.4258-5.4219 5.4219-5.4219 2.9922 0 5.4219 2.4258 5.4219 5.4219 0 2.1367-1.2344 3.9844-3.0312 4.8672zm-15.434-24.098h26.098v-9.8633c0-4.8203-2.0664-9.0078-6.3906-11.32-2.0352-1.0898-4.3555-1.6211-6.6562-1.6211-2.3008 0-4.6211 0.53516-6.6562 1.6211-4.3242 2.3086-6.3906 6.5-6.3906 11.32v9.8633z" fill-rule="evenodd"/>
                                            </svg>
                                        </div>

                                    {% endif %}


                                    <b><a href="{% url 'watchlist_catalogue_detail' wl.wl_id %}">{{ wl.name }}</a></b></td>
                                    <td  style="white-space: normal;">{% if wl.description|length > 60 %}
                                        {{ wl.description|slice:"0:60" }} ...

                                        <a href="#" class="link-primary" data-bs-container="body" data-bs-toggle="popover" data-bs-trigger="focus" data-bs-placement="top" data-bs-content="{{wl.description}}">more</a>

                                    {% else %} {{ wl.description|slice:"0:100" }}{% endif %} </td>
                                    <td>{{wl.count|intcomma}}</td>
                                </tr>
                            {% endfor %}
                    {% else %}
                        <tr>
                            <th>Name</th>
                            <th>Owner</th>
                            <th>Description</th>
                            <th>Count</th>
                        </tr></thead>
                        <tbody>
                            {% for wl in other_watchlists %}
                                <tr><td class="align-middle">


                                    <b><a href="{% url 'watchlist_catalogue_detail' wl.wl_id %}">{{ wl.name }}</a></b></td>
                                    <td><img alt="Image placeholder" src="{{ wl.profile_image }}" class="mb-1 me-1 avatar rounded-circle"> {{ wl.user }}</td>
                                    <td  style="white-space: normal;">{% if wl.description|length > 60 %}
                                        {{ wl.description|slice:"0:60" }} ...

                                        <a href="#" class="link-primary" data-bs-container="body" data-bs-toggle="popover" data-bs-trigger="focus" data-bs-placement="top" data-bs-content="{{wl.description}}">more</a>

                                    {% else %} {{ wl.description|slice:"0:100" }}{% endif %} </td>
                                    <td>{{wl.count|intcomma}}</td>
                                </tr>
                            {% endfor %}
                    {% endif %}

                </tbody>
            </table>
        </div>
    </div>
</div>

